<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Suwa Rasa | Taste the Extraordinary</title>
    
    <script crossorigin src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    
    <script src="https://cdn.tailwindcss.com"></script>
    
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">

    <style>
        body { font-family: 'Poppins', sans-serif; background-color: #FAFAFA; scroll-behavior: smooth; }
        
        .hide-scrollbar::-webkit-scrollbar { display: none; }
        .hide-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }
        
        /* Glassmorphism Navigation */
        .glass { 
            background: rgba(255, 255, 255, 0.95); 
            backdrop-filter: blur(12px); 
            border-bottom: 1px solid rgba(255,255,255,0.5);
        }

        /* Hero Background - Updated WebP Link */
        .hero-pattern {
            background-image: url('https://i.ibb.co/QFkL6z73/background.webp');
            background-size: cover;
            background-position: center;
        }

        /* Animations */
        .animate-float { animation: float 6s ease-in-out infinite; }
        @keyframes float { 0% { transform: translateY(0px); } 50% { transform: translateY(-10px); } 100% { transform: translateY(0px); } }
        
        .animate-slide-up { animation: slideUp 0.5s ease-out forwards; }
        @keyframes slideUp { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }

        .selected-ring { 
            box-shadow: 0 0 0 4px #f97316; 
            transform: scale(1.02);
        }
    </style>
</head>
<body class="text-gray-800 antialiased selection:bg-orange-200 selection:text-orange-900">

    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect } = React;

        // ==========================================
        // 1. DATA (Updated with WebP Links)
        // ==========================================
        const MENU_DB = {
            base: [
                { id: 'b1', name: 'Samba Rice', price: 50, img: 'https://i.ibb.co/tMX5kvnN/samba-rice.webp' },
                { id: 'b2', name: 'Red Kekulu', price: 50, img: 'https://i.ibb.co/MyGg8YwF/red-rice.webp' }
            ],
            veg: [
                { id: 'v1', name: 'Beetroot', price: 60, img: 'https://i.ibb.co/PG1RTb1f/beetroot.webp' },
                { id: 'v2', name: 'Jackfruit', price: 60, img: 'https://i.ibb.co/Z65zkcLR/jackfruit.webp' },
                { id: 'v3', name: 'Green Beans', price: 60, img: 'https://i.ibb.co/NdYgMCcL/beans.webp' },
                { id: 'v4', name: 'Pumpkin', price: 60, img: 'https://i.ibb.co/wrpgsybk/pumpkin.webp' }
            ],
            proteins: [
                { id: 'p1', name: 'Chicken', price: 150, img: 'https://i.ibb.co/tMHqJg8b/chicken.webp', tags: ['muscle'] },
                { id: 'p2', name: 'Fish', price: 90, img: 'https://i.ibb.co/tpJnSfBm/fish.webp', tags: ['lean'] },
                { id: 'p3', name: 'Boiled Eggs', price: 50, img: 'https://i.ibb.co/60V2CfB5/boil-egg.webp', tags: ['protein'] },
                { id: 'p4', name: 'Fried Eggs', price: 50, img: 'https://i.ibb.co/8LqTDrmK/fried-egg.webp', tags: ['tasty'] }
            ],
            addons: [
                { id: 'a1', name: 'Dhal', price: 30, img: 'https://i.ibb.co/nq6jCz4w/dhal.webp' },
                { id: 'a2', name: 'Devilled Potatoes', price: 50, img: 'https://i.ibb.co/KxBtpp9f/potato.webp' },
                { id: 'a3', name: 'Soya Meat', price: 40, img: 'https://i.ibb.co/k2dSmCZT/soya.webp' },
                { id: 'a4', name: 'Salad', price: 20, img: 'https://i.ibb.co/vnCsvG1/salad.webp' },
                { id: 'a5', name: 'Papadam', price: 10, img: 'https://i.ibb.co/cK6GFC92/papadam.webp' }
            ]
        };

        // ==========================================
        // 2. COMPONENTS
        // ==========================================
        
        const Logo = () => (
            <div className="relative w-40 h-40 rounded-full border-4 border-orange-500 overflow-hidden shadow-2xl bg-white flex-shrink-0 z-50">
                <img src="https://i.ibb.co/Cs6hdGLR/logo.webp" alt="Suwa Rasa" className="w-full h-full object-cover" />
            </div>
        );

        const Navbar = ({ cartCount, onOpenCart, onOpenChef }) => (
            <nav className="fixed top-0 w-full z-50 glass transition-all duration-300 overflow-visible">
                <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
                    <div className="flex justify-between items-center h-24 relative">
                        <div className="flex items-center cursor-pointer gap-3" onClick={() => window.scrollTo({top:0, behavior:'smooth'})}>
                            <div className="absolute top-0 left-0 mt-4"><Logo /></div>
                            <div className="flex flex-col ml-44">
                                <span className="font-bold text-2xl tracking-tight text-gray-900 leading-none">Suwa<span className="text-orange-500">Rasa</span></span>
                                <span className="text-[0.65rem] font-bold text-gray-400 tracking-widest uppercase">Authentic Taste</span>
                            </div>
                        </div>
                        
                        <div className="hidden md:flex items-center space-x-8">
                            <a href="index.html" onClick={(e) => { e.preventDefault(); window.scrollTo({top: 0, behavior: 'smooth'}); }} className="text-gray-600 hover:text-orange-500 font-semibold transition duration-200">Home</a>
                            <a href="#build" className="text-gray-600 hover:text-orange-500 font-semibold transition duration-200">Menu</a>
                            <a href="about.html" className="text-gray-600 hover:text-orange-500 font-semibold transition duration-200">About</a>
                            <a href="contact.html" className="text-gray-600 hover:text-orange-500 font-semibold transition duration-200">Contact</a>
                        </div>

                        <div className="flex items-center gap-4 lg:gap-6">
                            <button onClick={onOpenChef} className="hidden lg:flex items-center gap-2 bg-gray-100 hover:bg-orange-50 text-gray-700 hover:text-orange-600 px-4 py-2 rounded-full transition font-medium text-sm">
                                <i className="fas fa-robot"></i> Chef AI
                            </button>
                            <button onClick={onOpenCart} className="relative p-2 rounded-full hover:bg-orange-50 text-gray-600 transition group">
                                <i className="fas fa-shopping-bag text-2xl group-hover:text-orange-500 transition"></i>
                                {cartCount > 0 && (
                                    <span className="absolute -top-1 -right-1 bg-red-500 text-white text-xs font-bold w-5 h-5 rounded-full flex items-center justify-center border-2 border-white transform scale-110">
                                        {cartCount}
                                    </span>
                                )}
                            </button>
                        </div>
                    </div>
                </div>
            </nav>
        );

        const Hero = ({ onOpenChef }) => (
            <div className="relative pt-24 pb-16 lg:pt-40 lg:pb-32 overflow-hidden bg-gray-50">
                <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 relative z-10">
                    <div className="lg:w-1/2 mt-16 lg:mt-20">
                        <span className="bg-orange-100 text-orange-600 font-bold px-4 py-2 rounded-full text-xs uppercase tracking-wider inline-block mb-6 shadow-sm">
                            ðŸŒ¿ Fresh â€¢ Healthy â€¢ Homemade
                        </span>
                        <h1 className="text-5xl lg:text-7xl font-extrabold text-gray-900 leading-[1.1] mb-8">
                            Taste the <br/>
                            <span className="text-transparent bg-clip-text bg-gradient-to-r from-orange-500 to-red-600">Extraordinary.</span>
                        </h1>
                        <p className="text-lg text-gray-500 mb-10 max-w-lg leading-relaxed">
                            Custom-built Sri Lankan rice packets delivered to your door. Choose your base, pick your proteins, and select your daily curries.
                        </p>
                        <div className="flex space-x-4">
                            <a href="#build" className="bg-orange-500 hover:bg-orange-600 text-white px-8 py-4 rounded-full font-bold shadow-lg shadow-orange-500/30 transition transform hover:-translate-y-1">
                                Build Packet
                            </a>
                            <button onClick={onOpenChef} className="bg-white text-gray-700 hover:text-orange-500 px-8 py-4 rounded-full font-bold shadow-md transition border border-gray-100 flex items-center">
                                <i className="fas fa-magic mr-2 text-orange-400"></i> AI Suggest
                            </button>
                        </div>
                    </div>
                </div>
                <div className="absolute top-0 right-0 w-full lg:w-[55%] h-full hero-pattern opacity-100">
                    <div className="absolute inset-0 bg-gradient-to-r from-gray-50 via-gray-50/80 to-transparent lg:via-gray-50/40"></div>
                </div>
            </div>
        );

        const Builder = ({ addToCart, prefillData }) => {
            const [selection, setSelection] = useState({
                base: MENU_DB.base[0],
                protein: null,
                veg: [],
                addons: []
            });

            useEffect(() => { if(prefillData) setSelection(prefillData); }, [prefillData]);

            const toggleMultiple = (category, item) => {
                setSelection(prev => {
                    const exists = prev[category].find(i => i.id === item.id);
                    if (exists) return { ...prev, [category]: prev[category].filter(i => i.id !== item.id) };
                    return { ...prev, [category]: [...prev[category], item] };
                });
            };

            const calculateTotal = () => {
                let total = selection.base ? selection.base.price : 0;
                if (selection.protein) total += selection.protein.price;
                selection.veg.forEach(v => total += v.price);
                selection.addons.forEach(a => total += a.price);
                return total;
            };

            const ItemCard = ({ item, isSelected, onClick }) => (
                <div onClick={onClick} className={`group bg-white rounded-3xl p-3 shadow-md hover:shadow-xl transition-all border border-gray-100 cursor-pointer ${isSelected ? 'selected-ring' : ''}`}>
                    <div className="relative h-28 rounded-2xl overflow-hidden mb-2 bg-gray-50">
                        <img src={item.img} className="w-full h-full object-cover group-hover:scale-110 transition duration-500" />
                        <div className="absolute top-2 right-2 bg-white/90 px-2 py-0.5 rounded-full text-[10px] font-bold">Rs.{item.price}</div>
                    </div>
                    <h3 className="font-bold text-xs text-center text-gray-800">{item.name}</h3>
                </div>
            );

            return (
                <section id="build" className="py-20 max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
                    <div className="text-center mb-12"><h2 className="text-4xl font-bold mb-4">Craft Your Meal</h2><div className="w-20 h-1 bg-orange-500 mx-auto rounded-full"></div></div>
                    <div className="flex flex-col lg:flex-row gap-12">
                        <div className="flex-1 space-y-12">
                            {/* Base */}
                            <div>
                                <h3 className="font-bold text-xl mb-6">1. Select Base</h3>
                                <div className="grid grid-cols-2 md:grid-cols-4 gap-4">
                                    {MENU_DB.base.map(i => <ItemCard key={i.id} item={i} isSelected={selection.base?.id === i.id} onClick={() => setSelection({...selection, base:i})} />)}
                                </div>
                            </div>
                            {/* Veg */}
                            <div>
                                <h3 className="font-bold text-xl mb-6">2. Vegetables</h3>
                                <div className="grid grid-cols-2 md:grid-cols-4 gap-4">
                                    {MENU_DB.veg.map(i => <ItemCard key={i.id} item={i} isSelected={selection.veg.some(v => v.id === i.id)} onClick={() => toggleMultiple('veg', i)} />)}
                                </div>
                            </div>
                            {/* Protein */}
                            <div>
                                <h3 className="font-bold text-xl mb-6">3. Proteins</h3>
                                <div className="grid grid-cols-2 md:grid-cols-4 gap-4">
                                    {MENU_DB.proteins.map(i => <ItemCard key={i.id} item={i} isSelected={selection.protein?.id === i.id} onClick={() => setSelection({...selection, protein:i})} />)}
                                </div>
                            </div>
                            {/* Addons */}
                            <div>
                                <h3 className="font-bold text-xl mb-6">4. Add-ons</h3>
                                <div className="grid grid-cols-2 md:grid-cols-4 gap-4">
                                    {MENU_DB.addons.map(i => <ItemCard key={i.id} item={i} isSelected={selection.addons.some(a => a.id === i.id)} onClick={() => toggleMultiple('addons', i)} />)}
                                </div>
                            </div>
                        </div>

                        {/* Summary Sticky */}
                        <div className="lg:w-80 w-full lg:sticky lg:top-28 h-fit">
                            <div className="bg-white rounded-[2rem] shadow-2xl p-6 border border-gray-100">
                                <h3 className="text-xl font-bold mb-6">Your Packet</h3>
                                <div className="space-y-3 mb-6 text-sm">
                                    <div className="flex justify-between font-bold"><span>{selection.base?.name}</span><span>Rs.{selection.base?.price}</span></div>
                                    {selection.veg.map(v => <div key={v.id} className="flex justify-between text-gray-500"><span>+ {v.name}</span><span>{v.price}</span></div>)}
                                    {selection.protein && <div className="flex justify-between font-bold text-orange-600"><span>{selection.protein.name}</span><span>Rs.{selection.protein.price}</span></div>}
                                    {selection.addons.map(a => <div key={a.id} className="flex justify-between text-gray-500"><span>+ {a.name}</span><span>{a.price}</span></div>)}
                                </div>
                                <div className="bg-gray-50 p-4 rounded-xl mb-6 flex justify-between items-center font-bold"><span>Total</span><span>Rs. {calculateTotal()}</span></div>
                                <button onClick={() => addToCart(selection, calculateTotal())} className="w-full bg-gray-900 text-white py-4 rounded-xl font-bold shadow-lg hover:bg-orange-500 transition">Add to Cart</button>
                            </div>
                        </div>
                    </div>
                </section>
            );
        };

        const ChefBot = ({ isOpen, onClose, onApplySuggestion }) => {
            const [step, setStep] = useState('intro');
            const [prefs, setPrefs] = useState({ budget: 500, goal: 'balanced' });
            const [suggestion, setSuggestion] = useState(null);

            const generate = () => {
                let r = MENU_DB.base[0];
                let p = MENU_DB.proteins[0];
                let v = [MENU_DB.veg[0], MENU_DB.veg[2]];
                let a = [MENU_DB.addons[0]];

                if(prefs.goal === 'weight_loss') { r = MENU_DB.base[1]; p = MENU_DB.proteins[1]; }
                
                let total = r.price + p.price + v.reduce((s,i)=>s+i.price,0) + a.reduce((s,i)=>s+i.price,0);
                setSuggestion({ base: r, protein: p, veg: v, addons: a, total });
                setStep('result');
            };

            if (!isOpen) return null;

            return (
                <div className="fixed inset-0 z-[100] flex items-center justify-center p-4 bg-black/60 backdrop-blur-sm">
                    <div className="bg-white w-full max-w-md rounded-[2rem] shadow-2xl overflow-hidden animate-slide-up">
                        <div className="bg-gray-900 p-6 flex justify-between items-center text-white">
                            <div className="flex items-center gap-3"><div className="w-10 h-10 bg-orange-500 rounded-full flex items-center justify-center"><i className="fas fa-hat-chef"></i></div><h3 className="font-bold">Chef Rasa</h3></div>
                            <button onClick={onClose}><i className="fas fa-times"></i></button>
                        </div>
                        <div className="p-8">
                            {step === 'intro' ? (
                                <div className="text-center"><h3 className="text-xl font-bold mb-4">Let's find your perfect meal!</h3><button onClick={() => setStep('input')} className="w-full bg-gray-900 text-white py-4 rounded-xl font-bold hover:bg-orange-500 transition">Plan My Meal</button></div>
                            ) : step === 'input' ? (
                                <div className="space-y-6">
                                    <div><label className="block text-sm font-bold mb-2">Budget: Rs.{prefs.budget}</label><input type="range" min="300" max="1000" step="50" value={prefs.budget} onChange={e => setPrefs({...prefs, budget: parseInt(e.target.value)})} className="w-full accent-orange-500" /></div>
                                    <div><label className="block text-sm font-bold mb-2">Goal</label><div className="grid grid-cols-3 gap-2">{['balanced', 'muscle', 'weight_loss'].map(g => <button key={g} onClick={()=>setPrefs({...prefs, goal:g})} className={`py-2 text-xs rounded-lg border transition ${prefs.goal === g ? 'bg-orange-500 text-white border-orange-500' : 'bg-white'}`}>{g.replace('_',' ')}</button>)}</div></div>
                                    <button onClick={generate} className="w-full bg-gray-900 text-white py-4 rounded-xl font-bold">Generate Suggestion</button>
                                </div>
                            ) : (
                                <div>
                                    <div className="bg-orange-50 p-4 rounded-xl mb-6 text-sm">
                                        <p className="font-bold mb-2">Chef's Pick:</p>
                                        <p>{suggestion.base.name} + {suggestion.protein.name} + {suggestion.veg.length} Veggies</p>
                                        <p className="font-bold mt-2">Total: Rs.{suggestion.total}</p>
                                    </div>
                                    <button onClick={() => { onApplySuggestion(suggestion); onClose(); }} className="w-full bg-orange-500 text-white py-4 rounded-xl font-bold">Apply & Customize</button>
                                </div>
                            )}
                        </div>
                    </div>
                </div>
            );
        };

        const App = () => {
            const [cart, setCart] = useState([]);
            const [isCartOpen, setIsCartOpen] = useState(false);
            const [isChefOpen, setIsChefOpen] = useState(false);
            const [prefill, setPrefill] = useState(null);

            const addToCart = (data, price) => { setCart([...cart, { id: Date.now(), data, price }]); setIsCartOpen(true); };

            return (
                <div className="min-h-screen flex flex-col">
                    <Navbar cartCount={cart.length} onOpenCart={() => setIsCartOpen(true)} onOpenChef={() => setIsChefOpen(true)} />
                    <Hero onOpenChef={() => setIsChefOpen(true)} />
                    <Builder addToCart={addToCart} prefillData={prefill} />
                    <ChefBot isOpen={isChefOpen} onClose={() => setIsChefOpen(false)} onApplySuggestion={setPrefill} />
                    
                    {/* Simplified Cart Sidebar */}
                    {isCartOpen && (
                        <div className="fixed inset-0 z-[60]">
                            <div className="absolute inset-0 bg-black/50" onClick={() => setIsCartOpen(false)}></div>
                            <div className="absolute right-0 top-0 h-full w-80 bg-white p-6 shadow-2xl flex flex-col animate-slide-up">
                                <h2 className="text-xl font-bold mb-6">Basket</h2>
                                <div className="flex-1 overflow-y-auto space-y-4">
                                    {cart.map(i => (
                                        <div key={i.id} className="p-4 bg-gray-50 rounded-xl relative">
                                            <p className="font-bold text-sm">{i.data.protein?.name || 'Veg Packet'}</p>
                                            <p className="text-xs text-orange-500">Rs.{i.price}</p>
                                            <button onClick={()=>setCart(cart.filter(c => c.id !== i.id))} className="absolute top-2 right-2 text-gray-300 hover:text-red-500"><i className="fas fa-trash-alt"></i></button>
                                        </div>
                                    ))}
                                </div>
                                <div className="pt-6 border-t mt-auto font-bold text-lg flex justify-between"><span>Total</span><span>Rs. {cart.reduce((a,b)=>a+b.price, 0)}</span></div>
                            </div>
                        </div>
                    )}

                    <footer className="bg-gray-900 text-white py-12 text-center mt-auto">
                        <h2 className="text-2xl font-bold mb-4">Suwa<span className="text-orange-500">Rasa</span></h2>
                        <p className="text-gray-400 mb-8 max-w-sm mx-auto px-4">Authentic, healthy, and affordable home-cooked meals.</p>
                        <p className="text-gray-700 text-xs">&copy; 2026 Suwa Rasa. All rights reserved.</p>
                    </footer>
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
